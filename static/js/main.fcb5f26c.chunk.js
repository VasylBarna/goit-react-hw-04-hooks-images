(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,n){e.exports={image:"ImageGalleryItem_image__39yBB"}},13:function(e,t,n){e.exports={overlay:"Modal_overlay__ozS5R",modal:"Modal_modal__2cRze"}},14:function(e,t,n){e.exports={container:"Button_container__32yqD",button:"Button_button__2eJao"}},16:function(e,t,n){e.exports={container:"Container_container__5OlK6"}},18:function(e,t,n){e.exports={imageGallery:"ImageGallery_imageGallery__3PYGo",imageGalleryItem:"ImageGallery_imageGalleryItem__3sJ8S"}},27:function(e,t,n){},4:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__2Ixyh",searchForm:"Searchbar_searchForm__2Wi2g",button:"Searchbar_button__3_fhF",label:"Searchbar_label__2g7SV",input:"Searchbar_input__1ErjK"}},51:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(6),o=n.n(c),i=(n(26),n(27),n(3)),s=n(16),u=n.n(s),l=n(0),b=function(e){var t=e.children;return Object(l.jsx)("div",{className:u.a.container,children:t})},m=n(4),g=n.n(m);function h(e){var t=e.onSubmit,n=Object(a.useState)(""),r=Object(i.a)(n,2),c=r[0],o=r[1];return Object(l.jsx)("header",{className:g.a.searchbar,children:Object(l.jsxs)("form",{className:g.a.searchForm,onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),o("")):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u043e\u0447\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")},children:[Object(l.jsx)("button",{type:"submit",className:g.a.button,children:Object(l.jsx)("span",{className:g.a.label,children:"Search"})}),Object(l.jsx)("input",{className:g.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})}var j=n(15),f=n(11),d=n.n(f),p=n(17),O=n(8),_=n(9),v=function(){function e(){Object(O.a)(this,e),this.query="",this.pageNumber=1,this.perPage=12}return Object(_.a)(e,[{key:"fetchImages",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://pixabay.com","/api/?image_type=photo&orientation=horizontal&q=").concat(this.query,"&page=").concat(this.pageNumber,"&per_page=").concat(this.perPage,"&key=").concat("21930090-2f4bfee534669e28d6350f360"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,this.incrementPage(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"incrementPage",value:function(){this.pageNumber+=1}},{key:"resetPage",value:function(){this.pageNumber=1}}]),e}(),x=n(2),y=n.n(x),S=n(12),N=n.n(S),w=function(e){var t=e.id,n=e.url,a=e.tags,r=e.largeImage,c=e.toggleModal,o=e.handleLargeImage;return Object(l.jsx)("li",{className:N.a.imageGallery,onClick:function(){return c(),void o(r)},children:Object(l.jsx)("img",{className:N.a.image,src:n,alt:a})},t)};w.propeType={id:y.a.string.isRequired,url:y.a.string.isRequired,tags:y.a.string.isRequired,largeImage:y.a.string.isRequired,toggleModal:y.a.func.isRequired,handleLargeImage:y.a.func.isRequired};var I=w,k=n(13),C=n.n(k),q=document.querySelector("#modal-root");function F(e){var t=e.onClose,n=e.children;Object(a.useEffect)((function(){function e(e){"Escape"===e.code&&t()}return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]);return Object(c.createPortal)(Object(l.jsx)("div",{className:C.a.overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(l.jsx)("div",{className:C.a.modal,children:n})}),q)}var L=n(14),G=n.n(L),R=function(e){var t=e.onClick;return Object(l.jsx)("div",{className:G.a.container,children:Object(l.jsx)("button",{className:G.a.button,type:"button",onClick:t,children:"Load more..."})})},P=n(18),E=n.n(P),B=n(21),M=n(20),T=n(19),J=n.n(T),z=(n(50),function(e){Object(B.a)(n,e);var t=Object(M.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return Object(l.jsx)(J.a,{type:"Bars",color:"#FF8C00",height:300,width:300,timeout:2e3})}}]),n}(a.Component)),D=new v;function K(e){var t=e.imageName,n=Object(a.useState)([]),r=Object(i.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)(!1),u=Object(i.a)(s,2),b=u[0],m=u[1],g=Object(a.useState)(""),h=Object(i.a)(g,2),f=h[0],d=h[1],p=Object(a.useState)(!1),O=Object(i.a)(p,2),_=O[0],v=O[1];Object(a.useEffect)((function(){""!==t&&(o([]),D.query=t,v(!0),S())}),[t]);var x=function(){m((function(e){return!e}))},y=function(e){d(e)},S=function(){v(!0),D.fetchImages().then((function(e){var t=e.hits;return o((function(e){return[].concat(Object(j.a)(e),Object(j.a)(t))}))})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){return console.log(e)})).finally(v(!1))};return Object(l.jsxs)(l.Fragment,{children:[b&&Object(l.jsx)(F,{onClose:x,children:Object(l.jsx)("img",{src:f,alt:"images"})}),Object(l.jsx)("ul",{className:E.a.imageGallery,children:c.map((function(e){var t=e.id,n=e.webformatURL,a=e.tags,r=e.largeImageURL;return Object(l.jsx)(I,{url:n,tags:a,largeImage:r,toggleModal:x,handleLargeImage:y},t)}))}),c.length>0&&!_&&Object(l.jsx)(R,{onClick:function(){S()}}),_&&Object(l.jsx)(z,{})]})}function U(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(l.jsxs)(b,{children:[Object(l.jsx)(h,{onSubmit:function(e){r(e)}}),Object(l.jsx)(K,{imageName:n})]})}var H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(U,{})}),document.getElementById("root")),H()}},[[51,1,2]]]);
//# sourceMappingURL=main.fcb5f26c.chunk.js.map